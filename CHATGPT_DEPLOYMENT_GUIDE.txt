# AI Hiring Assistant - Deployment Guide for ChatGPT

You are helping me deploy my AI Hiring Assistant application to production. This application has:
- A Next.js frontend (TypeScript, Tailwind CSS)
- A FastAPI backend (Python 3.11)
- SQLite database (local) / PostgreSQL (production)
- OpenAI API integration
- Azure Document Intelligence (optional)

The application is located at: /Users/diederikpondman/Documents/ai_demo

## Project Structure
- Frontend: frontend/ (Next.js app)
- Backend: backend/ (FastAPI app)
- Database: backend/ai_hiring.db (SQLite, local only)

## Deployment Goals
1. Set up separate TEST and PRODUCTION environments
2. Deploy backend to Railway or Render
3. Deploy frontend to Vercel
4. Set up CI/CD with GitHub Actions
5. Use PostgreSQL for production database
6. Configure environment variables properly

## Current Status
- ‚úÖ Code is ready for deployment
- ‚úÖ Database configuration supports both SQLite and PostgreSQL
- ‚úÖ Environment variables are configured
- ‚úÖ CI/CD workflow files are created
- ‚è≥ Need to actually deploy to platforms

## Step-by-Step Deployment Instructions

### STEP 1: GitHub Repository Setup

**What I need to do:**
1. Create a GitHub repository (if not exists)
2. Initialize git (if not done)
3. Push code to GitHub
4. Create `develop` branch for testing

**Instructions for ChatGPT:**
- Help me check if git is initialized
- Guide me through creating a GitHub repository
- Help me push code to GitHub
- Help me create and push the develop branch
- Verify the repository structure is correct

**Commands I might need:**
```bash
cd /Users/diederikpondman/Documents/ai_demo
git status
git init (if needed)
git remote add origin <repository-url>
git add .
git commit -m "Initial commit - ready for deployment"
git push -u origin main
git checkout -b develop
git push -u origin develop
```

**What to verify:**
- Both `main` and `develop` branches exist on GitHub
- All files are pushed (except .env files which should be in .gitignore)
- Repository is accessible

---

### STEP 2: Backend Deployment - Railway

**What I need to do:**
1. Create Railway account
2. Connect GitHub repository
3. Deploy backend service
4. Add PostgreSQL database
5. Configure environment variables
6. Get backend URL

**Instructions for ChatGPT:**
- Guide me through Railway signup process
- Help me connect my GitHub repository
- Walk me through deploying the backend
- Help me add PostgreSQL database
- Guide me through setting environment variables
- Help me find and copy the backend URL
- Verify the backend is running (check /docs endpoint)

**Environment Variables to Set in Railway:**
- `OPENAI_API_KEY` = [My OpenAI API key]
- `ENVIRONMENT` = `production` (or `test` for test environment)
- `AZURE_DOC_INTEL_ENDPOINT` = [My Azure endpoint, if I have one]
- `AZURE_DOC_INTEL_KEY` = [My Azure key, if I have one]
- `DATABASE_URL` = [Auto-set by Railway when I add PostgreSQL]
- `PORT` = [Auto-set by Railway, usually 8000]
- `CORS_ORIGINS` = [My frontend URL, set this after deploying frontend]

**What to verify:**
- Backend service is running
- Database is connected
- Environment variables are set correctly
- API docs accessible at https://[my-backend-url].railway.app/docs
- Backend responds to health checks

**Alternative: If using Render instead of Railway:**
- Guide me through Render signup
- Help me create a Web Service
- Help me create PostgreSQL database
- Guide me through linking database to service
- Help me set environment variables
- Get the backend URL

---

### STEP 3: Backend Deployment - Test Environment

**What I need to do:**
1. Create a second backend service for testing (or use same service with different environment)
2. Configure test environment variables
3. Get test backend URL

**Instructions for ChatGPT:**
- Help me decide: separate service or same service with different branch?
- Guide me through setting up test backend
- Help me configure test environment variables
- Verify test backend is working

**Test Environment Variables:**
- Same as production, but:
- `ENVIRONMENT` = `test`
- `DATABASE_URL` = [Test database URL]

---

### STEP 4: Frontend Deployment - Vercel (Production)

**What I need to do:**
1. Create Vercel account
2. Import GitHub repository
3. Configure project settings
4. Set environment variables
5. Deploy
6. Get production frontend URL

**Instructions for ChatGPT:**
- Guide me through Vercel signup
- Help me import my GitHub repository
- Walk me through project configuration:
  - Root Directory: `frontend`
  - Framework: Next.js (should auto-detect)
  - Build Command: `npm run build` (auto)
  - Output Directory: `.next` (auto)
- Help me set environment variables for PRODUCTION (main branch)
- Guide me through the first deployment
- Help me find the production URL
- Verify the frontend is accessible

**Environment Variables for Production (main branch):**
- `OPENAI_API_KEY` = [My OpenAI API key]
- `NEXT_PUBLIC_BACKEND_URL` = [Production backend URL from Step 2]
- `NEXT_PUBLIC_ENVIRONMENT` = `production`

**What to verify:**
- Frontend builds successfully
- Frontend is accessible at https://[my-app].vercel.app
- Environment variables are set correctly
- Frontend can connect to backend

---

### STEP 5: Frontend Deployment - Vercel (Test Environment)

**What I need to do:**
1. Configure develop branch in Vercel
2. Set environment variables for test
3. Verify test deployment works

**Instructions for ChatGPT:**
- Help me add the `develop` branch in Vercel settings
- Guide me through setting environment variables for the develop branch
- Help me verify test deployment is separate from production

**Environment Variables for Test (develop branch):**
- `OPENAI_API_KEY` = [My OpenAI API key]
- `NEXT_PUBLIC_BACKEND_URL` = [Test backend URL from Step 3]
- `NEXT_PUBLIC_ENVIRONMENT` = `test`

**What to verify:**
- Test frontend deploys separately
- Test frontend uses test backend
- Test and production are isolated

---

### STEP 6: Database Initialization

**What I need to do:**
1. Verify database is accessible
2. Check that tables are created automatically
3. Verify default data is seeded

**Instructions for ChatGPT:**
- Help me check backend logs for database initialization
- Guide me through verifying database connection
- Help me check if tables exist
- Verify default personas are seeded
- Help me test database operations

**What to verify:**
- Database connection works
- Tables are created (candidates, jobs, personas, evaluation_results, etc.)
- Default personas exist in database
- Can perform CRUD operations

---

### STEP 7: CORS Configuration

**What I need to do:**
1. Update backend CORS_ORIGINS with frontend URL
2. Test CORS is working
3. Verify no CORS errors

**Instructions for ChatGPT:**
- Help me update CORS_ORIGINS in backend environment variables
- Guide me through testing CORS
- Help me troubleshoot any CORS errors

**CORS_ORIGINS should be:**
- Production backend: `https://[my-frontend].vercel.app`
- Test backend: `https://[my-test-frontend].vercel.app`
- Or comma-separated: `https://prod.vercel.app,https://test.vercel.app`

**What to verify:**
- No CORS errors in browser console
- Frontend can make API calls to backend
- CORS headers are correct

---

### STEP 8: GitHub Actions CI/CD Setup

**What I need to do:**
1. Get Vercel tokens and IDs
2. Add GitHub Secrets
3. Test the workflow
4. Verify auto-deployment works

**Instructions for ChatGPT:**
- Guide me through getting Vercel token:
  - Go to Vercel Settings ‚Üí Tokens
  - Create new token
  - Copy token value
- Help me find Vercel Org ID and Project IDs:
  - Org ID: Vercel Settings ‚Üí General
  - Project ID: Project Settings ‚Üí General
- Walk me through adding GitHub Secrets:
  - Go to GitHub repository ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions
  - Add each secret
- Help me test the workflow:
  - Make a small change
  - Push to develop branch
  - Verify test deployment triggers
  - Push to main branch
  - Verify production deployment triggers

**GitHub Secrets to Add:**
- `OPENAI_API_KEY` = [My OpenAI API key]
- `VERCEL_TOKEN` = [From Vercel Settings ‚Üí Tokens]
- `VERCEL_ORG_ID` = [From Vercel Settings ‚Üí General]
- `VERCEL_PROJECT_ID_PROD` = [From Vercel Production Project Settings]
- `VERCEL_PROJECT_ID_TEST` = [From Vercel Test Project Settings]
- `TEST_BACKEND_URL` = [Test backend URL]
- `PROD_BACKEND_URL` = [Production backend URL]

**What to verify:**
- GitHub Actions workflow runs on push
- Test environment deploys on develop branch push
- Production environment deploys on main branch push
- Workflow shows success status

---

### STEP 9: Testing the Deployment

**What I need to do:**
1. Test production environment
2. Test test environment
3. Verify all features work
4. Check for errors

**Instructions for ChatGPT:**
- Help me create a test plan
- Guide me through testing each feature:
  - Job upload
  - Candidate upload
  - Evaluation
  - Expert debate
  - Database operations
- Help me check logs for errors
- Guide me through troubleshooting any issues

**Features to Test:**
1. Upload job description
2. Upload candidate CV (PDF)
3. Run candidate evaluation
4. Run expert debate
5. View results
6. Check database persistence

**What to verify:**
- All features work in production
- All features work in test
- No errors in console
- No errors in backend logs
- Database saves data correctly
- API endpoints respond correctly

---

### STEP 10: Final Configuration

**What I need to do:**
1. Set up custom domain (optional)
2. Configure monitoring (optional)
3. Set up backups
4. Document URLs and credentials

**Instructions for ChatGPT:**
- Help me decide if I need a custom domain
- Guide me through domain setup if needed
- Help me set up monitoring tools (optional)
- Guide me through backup configuration
- Help me document all URLs and important information

**Information to Document:**
- Production frontend URL
- Production backend URL
- Test frontend URL
- Test backend URL
- Database connection strings
- Environment variable values (securely)
- GitHub repository URL
- Deployment platform accounts

---

## Troubleshooting Guide

### Common Issues and Solutions

**Issue: Backend won't start**
- Check: DATABASE_URL is set correctly
- Check: PORT is set (usually auto-set by platform)
- Check: All required environment variables are set
- Check: Backend logs for specific errors

**Issue: CORS errors**
- Check: CORS_ORIGINS includes frontend URL
- Check: Frontend NEXT_PUBLIC_BACKEND_URL is correct
- Check: Backend CORS middleware configuration
- Solution: Update CORS_ORIGINS in backend environment variables

**Issue: Frontend can't connect to backend**
- Check: NEXT_PUBLIC_BACKEND_URL is set correctly
- Check: Backend is running and accessible
- Check: Backend URL is reachable (try in browser)
- Check: CORS is configured correctly

**Issue: Database connection errors**
- Check: DATABASE_URL format is correct
- Check: Database is running
- Check: Database credentials are correct
- Check: Database is accessible from backend service

**Issue: Build fails**
- Check: Node.js version (should be 18+)
- Check: All dependencies are in package.json
- Check: TypeScript errors
- Check: Environment variables are set
- Check: Build logs for specific errors

**Issue: GitHub Actions fails**
- Check: All secrets are set correctly
- Check: Vercel tokens are valid
- Check: Project IDs are correct
- Check: Workflow file syntax is correct
- Check: GitHub Actions logs for specific errors

**Issue: Environment variables not working**
- Check: Variable names match exactly (case-sensitive)
- Check: Variables are set for correct environment
- Check: NEXT_PUBLIC_ prefix for frontend public variables
- Check: Variables are saved and deployed

---

## Important Notes for ChatGPT

1. **Always verify before proceeding**: Before moving to next step, help me verify the current step is complete and working.

2. **Security**: Remind me not to commit .env files or expose API keys. Help me verify .gitignore is correct.

3. **Environment separation**: Make sure test and production environments are truly separate (different databases, different URLs).

4. **Error handling**: If something fails, help me:
   - Check logs
   - Verify configuration
   - Test connectivity
   - Troubleshoot step by step

5. **Documentation**: Help me document important information as we go (URLs, credentials, etc.).

6. **Testing**: After each major step, help me test that it works before moving on.

7. **Backup**: Remind me to backup important data before making changes.

8. **Patience**: Some deployments take time. Help me understand what to expect and how long things might take.

---

## Quick Reference Commands

**Git:**
```bash
git status
git add .
git commit -m "message"
git push origin main
git push origin develop
git checkout -b feature/name
```

**Local Testing:**
```bash
# Backend
cd backend
source venv/bin/activate
python main.py

# Frontend
cd frontend
npm run dev
```

**Check Deployments:**
- GitHub Actions: Repository ‚Üí Actions tab
- Vercel: Dashboard ‚Üí Deployments
- Railway: Dashboard ‚Üí Deployments
- Render: Dashboard ‚Üí Deployments

---

## Current Step Tracker

When helping me, please track which step I'm on:

- [ ] Step 1: GitHub Repository Setup
- [ ] Step 2: Backend Deployment (Production)
- [ ] Step 3: Backend Deployment (Test)
- [ ] Step 4: Frontend Deployment (Production)
- [ ] Step 5: Frontend Deployment (Test)
- [ ] Step 6: Database Initialization
- [ ] Step 7: CORS Configuration
- [ ] Step 8: GitHub Actions CI/CD Setup
- [ ] Step 9: Testing the Deployment
- [ ] Step 10: Final Configuration

---

## How to Use This Guide

1. Copy this entire file into ChatGPT
2. Tell ChatGPT: "I'm ready to deploy. Help me start with Step 1"
3. ChatGPT will guide you through each step
4. Ask ChatGPT to verify each step before moving on
5. If you get stuck, ask ChatGPT to help troubleshoot
6. Update the step tracker as you complete steps

---

**Remember**: Take it one step at a time. Don't rush. Verify each step works before moving to the next one.

Good luck with your deployment! üöÄ

